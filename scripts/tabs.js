export class Tabs{constructor(t){this.tablistNode=t,this.tabs=[],this.firstTab=null,this.lastTab=null,this.tabs=Array.from(this.tablistNode.querySelectorAll("[role=tab]")),this.tabpanels=[];for(let t=0;t<this.tabs.length;t++){let e=this.tabs[t],s=document.getElementById(e.getAttribute("aria-controls"));e.tabIndex=-1,e.setAttribute("aria-selected","false"),this.tabpanels.push(s),e.addEventListener("keydown",this.onKeydown.bind(this)),e.addEventListener("click",this.onClick.bind(this)),this.firstTab||(this.firstTab=e),this.lastTab=e}this.setSelectedTab(this.firstTab,!1)}setSelectedTab(t,e){"boolean"!=typeof e&&(e=!0);for(let s=0;s<this.tabs.length;s++){let a=this.tabs[s];t===a?(a.setAttribute("aria-selected","true"),a.removeAttribute("tabindex"),this.tabpanels[s].classList.remove("tabs__panel_is-hidden"),e&&a.focus()):(a.setAttribute("aria-selected","false"),a.tabIndex=-1,this.tabpanels[s].classList.add("tabs__panel_is-hidden"))}}setSelectedToPreviousTab(t){let e;t===this.firstTab?this.setSelectedTab(this.lastTab):(e=this.tabs.indexOf(t),this.setSelectedTab(this.tabs[e-1]))}setSelectedToNextTab(t){let e;t===this.lastTab?this.setSelectedTab(this.firstTab):(e=this.tabs.indexOf(t),this.setSelectedTab(this.tabs[e+1]))}onKeydown(t){let e=t.currentTarget,s=!1;switch(t.key){case"ArrowLeft":this.setSelectedToPreviousTab(e),s=!0;break;case"ArrowRight":this.setSelectedToNextTab(e),s=!0;break;case"Home":this.setSelectedTab(this.firstTab),s=!0;break;case"End":this.setSelectedTab(this.lastTab),s=!0}s&&(t.stopPropagation(),t.preventDefault())}onClick(t){this.setSelectedTab(t.currentTarget)}}